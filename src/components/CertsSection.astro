---
import { siteConfig } from "../config";
import "@splidejs/splide/css"
import { SplideExtension, SplideSlide } from 'astro-splide';

const certs = siteConfig.certifications || [];
const hasCerts = certs.length > 0;
---

{hasCerts && (
<section id="certifications" class="p-8 sm:p-12 md:p-16 lg:p-24">
  <div>

    <!-- Section Heading -->
    <div>
      <h2 class="text-3xl sm:text-4xl md:text-5xl xl:text-6xl font-bold text-gray-900">
        ğŸ† Certifications
      </h2>
    </div>

    <!-- Fun subtitle -->
    <p class="mt-4 text-gray-600 text-lg italic" id="subtitle">
      Click on any cert to celebrate! ğŸ‰
    </p>

    <div
      class="w-[75px] h-[5px] mt-2 rounded-full"
      style={`background-color: ${siteConfig.accentColor}`}
    />

    <!-- Carousel -->
    <div class="mt-6">
    <SplideExtension
      class='not-content'
      options={ 
        {
        perPage: 4,
        breakpoints: {
          1280: {
            perPage: 3,
          },
          768: {
            perPage: 2,
          },
          640: {
            perPage: 1,
          },
        },
        type: 'loop',
        drag   : 'free',
        focus  : 'center',
        gap: "1rem",
        pauseOnHover: true,
        autoScroll: {
          speed: 1,
        },
        height: "20rem",
        hasTrack: false
      } }
    >
      {certs.map((cert) => (
        <SplideSlide>  
          <a
            href={cert.link}
            target="_blank"
            rel="noopener noreferrer"
            class="block bg-gray-50 border border-gray-200 rounded-xl p-4
            hover:bg-white hover:shadow-lg transition h-full"
          >
            <img
              src={cert.img}
              alt={cert.name}
              class="w-full h-50 object-contain mx-auto"
            />

            <p class="mt-4 text-center text-gray-800 font-medium text-base">
              {cert.name}
            </p>
          </a>
        </SplideSlide>
      ))}
    </SplideExtension>
    </div>
  </div>
</section>
)}

<script>
  import { AutoScroll } from '@splidejs/splide-extension-auto-scroll';
  import { initSplideExtension } from "astro-splide/js/splideExtensionUtils"
  initSplideExtension({AutoScroll})
  // Fun messages for achievements

  const funSubtitles = [
    "Click to see âœ¨",
    "These aren't just badges, they're trophies! ğŸ†",
    "Gotta catch 'em all! ğŸ¯",
  ];

  // Rotate subtitle
  function rotateSubtitle() {
    const subtitle = document.getElementById('subtitle');
    if (!subtitle) return;
    
    let index = 0;
    setInterval(() => {
      subtitle.style.opacity = '0';
      setTimeout(() => {
        index = (index + 1) % funSubtitles.length;
        subtitle.textContent = funSubtitles[index];
        subtitle.style.opacity = '1';
      }, 300);
    }, 4000);
  }

  // Initialize everything when DOM is ready
  document.addEventListener('DOMContentLoaded', () => {    
    rotateSubtitle();
  });
</script>



<style is:global>
  #subtitle {
    transition: opacity 0.3s ease-in-out;
  }
</style>